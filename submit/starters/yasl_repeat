#!yasl

// $> ./yasl_repeat 4 Bonjour "how are you ?"
// BonjourBonjourBonjourBonjour
// how are you ?how are you ?how are you ?how are you ?how are you ?

// void err_exit(char *str)
{
	print    // print(str)
	1 exit   // exit(1)
} err_exit

// void print_repeat(int n, char *str)
{
	#(= print)		// print str n times
	!				// remove str
	"\n"print		// print newline
} print_repeat

// main(int argc, char *argv[])
// if (argc <= 2) err_exit("Error\n");
= 2 <= ? ("Error\n" err_exit)
2 -			// argc -= 2
3 !^        // unroll (argc, argv[0], argv[1]) -> (argv[0], argv[1], argc)

!           // drop argv[0]

// if (argv[1] <= 0) err_exit("Error\n");
// TODO: handle when argv[1] is "3abc"
= 0 <= ? ("Error\n" err_exit)

1 + 1 -     // push atoi(argv[1])
(= !):1		// move repeat_num to stack1
#(
	1:=           // push `repeat_num` to stack 0
	print_repeat  // print_repeat(repeat_num, argv[i])
	1:(1 +):1     // repeat_num++
)
